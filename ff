CREATE OR REPLACE PROCEDURE DeleteUserDetailsAndLocation(
   p_userID IN NUMBER
)
IS
BEGIN
   -- Delete from USER_LOCATION_DETAILS
   DELETE FROM your_schema.USER_LOCATION_DETAILS WHERE user_id = p_userID;

   -- Delete from USER_DETAILS
   DELETE FROM your_schema.USER_DETAILS WHERE user_id = p_userID;

   DBMS_OUTPUT.PUT_LINE('User details and location deleted for user ID: ' || p_userID);
END DeleteUserDetailsAndLocation;
/




-- Disable constraints
ALTER TABLE your_schema.USER_LOCATION_DETAILS DISABLE CONSTRAINT constraint_name;
ALTER TABLE your_schema.USER_DETAILS DISABLE CONSTRAINT constraint_name;

-- Execute the procedure
BEGIN
   DeleteUserDetailsAndLocation(p_userID => 1);
END;
/

-- Enable constraints
ALTER TABLE your_schema.USER_LOCATION_DETAILS ENABLE CONSTRAINT constraint_name;
ALTER TABLE your_schema.USER_DETAILS ENABLE CONSTRAINT constraint_name;


SELECT constraint_name
FROM all_constraints
WHERE r_constraint_name IN (
    SELECT constraint_name
    FROM all_constraints
    WHERE table_name = 'USER_DETAILS'
);
